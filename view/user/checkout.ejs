<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Neritt</title>
    <!-- favicons Icons -->
    <link rel="apple-touch-icon" sizes="180x180"
        href="https://neritt.in/assets/user/images/assets/favicons/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32"
        href="https://neritt.in/assets/user/images/assets/favicons/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16"
        href="https://neritt.in/assets/user/images/assets/favicons/favicon-16x16.png" />
    <link rel="manifest" href="https://neritt.in/assets/user/images/assets/favicons/site.webmanifest" />
    <meta name="description" content="Nerhin" />
    <meta name="csrf-token" content="Np51VhJX2mjS6aFq38Av40PXgEDzsYOxlViGGC3K" />
    <link rel=" preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&family=Rajdhani:wght@300;400;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css" />
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://neritt.in/assets/user/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://neritt.in/assets/user/css/as.range.min.css" rel="stylesheet">
    <link href="https://neritt.in/assets/user/css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Latest compiled and minified CSS -->

    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .order-summary {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 5px;
        }

        .order-summary h2 {
            margin-top: 0;
        }

        .order-items {
            margin-bottom: 20px;
        }

        .order-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .product-image img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 5px;
            margin-right: 10px;
        }

        .quantity-price {
            display: flex;
            align-items: center;
        }

        .totals {
            margin-bottom: 20px;
        }

        .total {
            font-weight: bold;
        }

        .payment-methods label {
            display: block;
            margin-bottom: 10px;
        }

        .btn {
            background-color: #007bff;
            color: #fff;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
            display: inline-block;
        }

        .btn:hover {
            background-color: #0056b3;
        }
    </style>
</head>

<body>
    <%-include("header.ejs")-%>

        <header class="main-header mobile-header">
            <div class="container">
                <div class="row top-header-with-icons">
                    <div class="col col-left-logo">
                        <div class="mobile-menu-trigger">
                            <a data-bs-toggle="offcanvas" href="#mobile-menu-offcanvas" role="button"
                                aria-controls="mobile-menu-offcanvas">
                                <span class="lines">
                                    <span class="sr-only">Menu</span>
                                    <span class="line one"></span>
                                    <span class="line two"></span>
                                    <span class="line three"></span>
                                </span>
                            </a>
                        </div>
                        <div class="mobile-logo">
                            <a href="/">
                                <img src="https://neritt.in/assets/user/images/assets/logo-dark.png" alt="">
                            </a>
                        </div>
                    </div>
                    <div class="col">
                        <div class="mobile-icons">
                            <ul>
                                <li>
                                    <a href="#" id="my-account-mobile-popup" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        <div class="text-with-icon">
                                            <div class="icon icon-user">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="24.422" height="23.178"
                                                    viewBox="0 0 24.422 23.178">
                                                    <path id="Path_32" data-name="Path 32"
                                                        d="M111.923,54.679H88.805a.653.653,0,0,1-.651-.706A8.956,8.956,0,0,1,97.034,45.8h6.66a8.957,8.957,0,0,1,8.879,8.173.653.653,0,0,1-.651.706ZM89.548,53.374H111.18a7.651,7.651,0,0,0-7.486-6.268h-6.66A7.65,7.65,0,0,0,89.548,53.374Zm10.816-8.357A5.523,5.523,0,0,1,94.847,39.5V37.018a5.517,5.517,0,1,1,11.034,0V39.5A5.523,5.523,0,0,1,100.364,45.016Zm0-12.209a4.216,4.216,0,0,0-4.211,4.211V39.5a4.211,4.211,0,1,0,8.423,0V37.018a4.216,4.216,0,0,0-4.211-4.211Z"
                                                        transform="translate(-88.152 -31.501)" fill="#FFFFFF" />
                                                </svg>
                                            </div>
                                        </div>
                                    </a>
                                    <div class="dropdown-menu dropdown-profile-sec"
                                        aria-labelledby="my-account-mobile-popup">
                                        <ul>
                                            <li>
                                                <a href="https://neritt.in/my-orders">
                                                    <span class="svg-icon">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="12.02"
                                                            height="13.248" viewBox="0 0 12.02 13.248">
                                                            <g transform="translate(-101 -85.1)">
                                                                <g data-name="Group 10414"
                                                                    transform="translate(101 85.1)">
                                                                    <path data-name="Path 11552"
                                                                        d="M113.012,89.034s0-.008,0-.008,0-.012,0-.019,0-.012,0-.016,0-.008,0-.012a.209.209,0,0,0-.027-.05h0l-2.519-3.7a.286.286,0,0,0-.24-.128h-6.4a.286.286,0,0,0-.24.128l-2.519,3.7h0a.321.321,0,0,0-.027.05s0,.008,0,.012a.023.023,0,0,0,0,.016c0,.008,0,.012,0,.019s0,.008,0,.008a.3.3,0,0,0-.008.058h0v8.965a.293.293,0,0,0,.291.291h11.438a.293.293,0,0,0,.291-.291V89.092h0C113.016,89.073,113.016,89.054,113.012,89.034Zm-.837-.233h-3.756l-.353-3.12h1.985Zm-6.031.581h1.725v2.132l-.694-.488a.283.283,0,0,0-.333,0l-.694.488V89.383Zm1.337-3.7.353,3.12h-1.655l.353-3.12Zm-3.516,0h1.985L105.6,88.8h-3.756Zm8.469,12.085H101.581V89.383h3.985v2.69a.3.3,0,0,0,.155.26.293.293,0,0,0,.3-.019l.985-.694.985.694a.294.294,0,0,0,.167.054.33.33,0,0,0,.136-.031.291.291,0,0,0,.155-.26v-2.69h3.985Z"
                                                                        transform="translate(-101 -85.1)"
                                                                        fill="#bcbfb8" />
                                                                    <path data-name="Path 11553"
                                                                        d="M142.653,330.4h-2.062a.291.291,0,1,0,0,.581h2.062a.291.291,0,0,0,0-.581Z"
                                                                        transform="translate(-138.777 -320.892)"
                                                                        fill="#bcbfb8" />
                                                                    <path data-name="Path 11554"
                                                                        d="M141.622,361.9h-1.031a.291.291,0,1,0,0,.581h1.031a.291.291,0,0,0,0-.581Z"
                                                                        transform="translate(-138.777 -351.171)"
                                                                        fill="#bcbfb8" />
                                                                </g>
                                                            </g>
                                                        </svg>
                                                    </span> My Orders
                                                </a>
                                            </li>
                                            <li>
                                                <a href="https://neritt.in/logout" onclick="event.preventDefault();
                                                document.getElementById('logout-form').submit();">
                                                    <span class="svg-icon icon-signout">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="13.09"
                                                            height="12.692" viewBox="0 0 13.09 12.692">
                                                            <g data-name="8324248_ui_essential_app_log_out_icon"
                                                                transform="translate(-2.205 -2.155)">
                                                                <path data-name="Path 11556"
                                                                    d="M8.995,7.8V5L5,1,1,5v7.995H8.995v-2.8"
                                                                    transform="translate(1.555 1.505)" fill="none"
                                                                    stroke="#bcbfb8" stroke-linejoin="round"
                                                                    stroke-miterlimit="10" stroke-width="0.7" />
                                                                <line data-name="Line 53" x2="8"
                                                                    transform="translate(6.5 10.503)" fill="none"
                                                                    stroke="#bcbfb8" stroke-linejoin="round"
                                                                    stroke-miterlimit="10" stroke-width="0.7" />
                                                                <path data-name="Path 11557" d="M25,15l2.8,2.8-2.8,2.8"
                                                                    transform="translate(-12.851 -7.293)" fill="none"
                                                                    stroke="#bcbfb8" stroke-linejoin="round"
                                                                    stroke-miterlimit="10" stroke-width="0.7" />
                                                            </g>
                                                        </svg>
                                                    </span> Sign Out
                                                    <form id="logout-form" action="https://neritt.in/logout"
                                                        method="POST" class="d-none">
                                                        <input type="hidden" name="_token"
                                                            value="Np51VhJX2mjS6aFq38Av40PXgEDzsYOxlViGGC3K">
                                                    </form>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </li>
                                <li>
                                    <a href="/cart" id="min-cart-mobile" data-bs-toggle="dropdown"
                                        aria-expanded="false">
                                        <div class="text-with-icon">
                                            <div class="icon icon-cart">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="29.761" height="28.327"
                                                    viewBox="0 0 29.761 28.327">
                                                    <path data-name="Union 2"
                                                        d="M-1440.008,27.361a3.237,3.237,0,0,1-.99-2.331,3.237,3.237,0,0,1,.99-2.331,3.4,3.4,0,0,1,2.388-.966,3.4,3.4,0,0,1,2.388.966,3.236,3.236,0,0,1,.989,2.331,3.231,3.231,0,0,1-.99,2.331,3.4,3.4,0,0,1-2.388.966A3.4,3.4,0,0,1-1440.008,27.361Zm1.44-3.257a1.283,1.283,0,0,0-.393.926,1.284,1.284,0,0,0,.393.926,1.349,1.349,0,0,0,.948.384,1.349,1.349,0,0,0,.948-.384,1.286,1.286,0,0,0,.393-.926,1.286,1.286,0,0,0-.393-.926,1.349,1.349,0,0,0-.948-.384A1.349,1.349,0,0,0-1438.568,24.1Zm-9.84,3.257a3.237,3.237,0,0,1-.99-2.331,3.235,3.235,0,0,1,.99-2.331,3.4,3.4,0,0,1,2.388-.966,3.4,3.4,0,0,1,2.388.966,3.237,3.237,0,0,1,.989,2.331,3.235,3.235,0,0,1-.99,2.331,3.4,3.4,0,0,1-2.388.966A3.4,3.4,0,0,1-1448.408,27.361Zm1.439-3.257a1.286,1.286,0,0,0-.393.926,1.286,1.286,0,0,0,.393.926,1.352,1.352,0,0,0,.949.384,1.35,1.35,0,0,0,.948-.384,1.286,1.286,0,0,0,.393-.926,1.286,1.286,0,0,0-.393-.926,1.35,1.35,0,0,0-.948-.384A1.352,1.352,0,0,0-1446.969,24.1Zm1.461-4.012a4.652,4.652,0,0,1-2.685-.835,4.464,4.464,0,0,1-1.663-2.221L-1453,7.889a.931.931,0,0,1-.042-.12l-1.4-4.083a2.49,2.49,0,0,0-.924-1.242,2.592,2.592,0,0,0-1.5-.457h-1.112A1.007,1.007,0,0,1-1459,.994,1.007,1.007,0,0,1-1457.982,0h1.112a4.647,4.647,0,0,1,2.685.835,4.472,4.472,0,0,1,1.665,2.22l1.19,3.461h21.4V6.57a1,1,0,0,1,.584.5.963.963,0,0,1,.054.757l-3.168,9.212a4.471,4.471,0,0,1-1.664,2.221,4.648,4.648,0,0,1-2.685.835Zm-2.422-3.684a2.491,2.491,0,0,0,.923,1.241,2.589,2.589,0,0,0,1.5.457h8.7a2.6,2.6,0,0,0,1.5-.457,2.493,2.493,0,0,0,.923-1.241l2.718-7.9h-18.979Z"
                                                        transform="translate(1459)" fill="#FFFFFF" />
                                                </svg>
                                                <span class="notify cart_count"></span>
                                            </div>
                                        </div>
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-end" aria-labelledby="min-cart-mobile">
                                        <h3 class="cart_title"></h3>
                                        <div class="mini-cart-container">

                                        </div>
                                        <div class="mini-cart-sub-total">
                                            <h2>Your Subtotal </h2>
                                            <div class="sub-total">
                                                <span class="price subtotalprice"></span>
                                            </div>
                                        </div>
                                        <div class="mini-cart-btn">
                                            <a href="/cart" style=" width: 100%;" class="btn btn-blue">View
                                                Cart</a>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

            </div>
        </header>

        <div class="offcanvas offcanvas-start" tabindex="-1" id="mobile-menu-offcanvas"
            aria-labelledby="mobile-menu-offcanvas">
            <div class="offcanvas-header">
                <a href="/">
                    <img src="https://neritt.in/assets/user/images/assets/logo.png" alt="">
                </a>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <div class="select mobile_menu_select">
                    <svg xmlns="http://www.w3.org/2000/svg" width="15.756" height="15.721" viewBox="0 0 15.756 15.721">
                        <path data-name="Path 31"
                            d="M155.957,85.581l-3.924-3.949a6.95,6.95,0,1,0-.739.713l3.924,3.924a.493.493,0,0,0,.713,0,.446.446,0,0,0,.025-.688ZM143.039,81.3a5.66,5.66,0,1,1,3.975,1.631A5.6,5.6,0,0,1,143.039,81.3Z"
                            transform="translate(-140.351 -70.701)" fill="#bcbfb8"></path>
                    </svg>
                    <select id="standard-select_sidemenu">

                    </select>
                    <span class="focus"></span>
                </div>
                <ul class="main-navigation-menu" id="mobile-nav">
                    <li><a href="/"><span class="Menuicon"><img
                                    src="https://neritt.in/assets/user/images/assets/home.svg"></span> Home</a></li>
                    <li><a href="/about">About Us</a></li>
                    <li><a href="/contact">Contact Us</a></li>
                </ul>
            </div>
        </div>
        <section class="checkout-form">
            <div class="modal fade bd-example-modal-lg" data-backdrop="static" data-keyboard="false" id="loader-modal"
                tabindex="-1">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content" style="width: 48px;color:red">
                        <i class="fa fa-spinner fa-spin fa-3x"></i>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-7">
                        <div class="checkout-form-feilds">
                            <div class="container mt-10">
                                <div class="row">
                                    <div class="col-md-12 offset-md-0">
                                       <form method="post" id="checkout_details" action="/store_checkout">
                                            <input type="hidden" name="_token"
                                                value="kFzTS1UngvgFQ0LSU9mEwC6HTt9zEKPiQ1Rd3R6y">
                                            <h2>CHECKOUT</h2>
                                            <div class="delivery-method">
                                                <p>Delivery Method</p>
                                                <div class="delivery-options d-flex">
                                                    <label>
                                                        <input type="radio" checked="checked" id="home-delivery"
                                                            value="1" name="delivery_type">
                                                        <span class="btn btn-primary">Home Delivery</span>
                                                    </label>
                                                    <label>
                                                        <input type="radio" id="pickup-from-store" value="2"
                                                            name="delivery_type">
                                                        <span class="btn btn-primary">Pickup From Store</span>
                                                    </label>
                                                </div>
                                            </div>
                                            <input type="hidden" name="payment_type" id="payment_type" value="1">
                                            <input type="hidden" name="order_id" id="order_id" value="<%=ordId%>">
                                            <input type="hidden" name="csrf_token" id="csrf_token"
                                                value="kFzTS1UngvgFQ0LSU9mEwC6HTt9zEKPiQ1Rd3R6y">
                                            <input type="hidden" name="rzp" id="rzp" value="rzp_test_ATZkateK1H3fCP">
                                            <input type="hidden" id="total_price"  name="finalAmount"
                                                value="<%= finalAmount %>" />
                                                <input type="hidden" id="total_discounted"  name="discount"
                                                value="<%= discount %>" />
                                                <% cart.products.forEach(function(product) { %>
                                                    <!-- Loop through each product in the cart -->
                                                    <input type="hidden" id="total_price" name="category" value="<%= product.category %>" />
                                                    <!-- Assuming you want to include the category of each product as a hidden input -->
                                                  <% }); %>
                                                
                                            <div class="billing-details">
                                                <p>BILLING DETAILS</p>
                                                <div class="row">

                                                    <div class="col-md-6">
                                                        <label for="existing_address">Seledfdsfdfct an existing
                                                            address:</label>
                                                        <select name="existing_address" id="existing_address"
                                                            class="form-control text-field">
                                                            <option value="">Select an address</option>
                                                            <% addresses.forEach(address=> { %>
                                                                <option value="<%= address._id %>">
                                                                    <%= `${address.fatherName}, ${address.studentName},
                                                                        ${address.email}, ${address.phone},
                                                                        ${address.district}, ${address.address},
                                                                        ${address.landmark}, ${address.pincode},
                                                                        ${address.homeOrOffice}` %>
                                                                </option>
                                                                <% }); %>
                                                        </select>
                                                    </div>

                                                    <div class="col-md-6">
                                                        <label for="displayed_father_name">Father's Name:</label>
                                                        <input type="text" id="displayed_father_name" name="fatherName"
                                                            class="form-control text-field">
                                                        <span id="fatherNameError" class="error"
                                                            style="display: none; font-weight:bold; color: #129393;">Please
                                                            enter Father's Name</span><br>
                                                    </div>

                                                    <div class="col-md-6">
                                                        <label for="displayed_student_name">Student's Name:</label>
                                                        <input type="text" id="displayed_student_name"
                                                            name="studentName" class="form-control text-field">
                                                        <span id="studentNameError" class="error"
                                                            style="display: none; font-weight:bold; color: #129393;">Please
                                                            enter Student's Name</span><br>
                                                    </div>

                                                    <div class="col-md-6">
                                                        <label for="displayed_email">Email:</label>
                                                        <input type="text" id="displayed_email" name="email"
                                                            class="form-control text-field">
                                                        <span class="invalid-feedback" role="alert" id="email_err"
                                                            style="font-weight:bold;display:none;     color: #129393">
                                                            Please Enter Email
                                                        </span>
                                                        <span id="emailError" class="error"
                                                            style="display: none; font-weight:bold; color: #129393;">Please
                                                            enter a valid Email</span><br>

                                                    </div>

                                                    <div class="col-md-6">
                                                        <label for="displayed_phone">Phone:</label>
                                                        <input type="text" id="displayed_phone" name="phone"
                                                            class="form-control text-field">
                                                        <span id="phoneError" class="error"
                                                            style="display: none; font-weight:bold; color: #129393;">Please
                                                            enter a valid Phone number</span><br>
                                                    </div>

                                                    <div class="col-md-6">
                                                        <label for="displayed_district">District:</label>
                                                        <select id="displayed_district" name="district"
                                                            class="form-control text-field">
                                                            <% const districts=['Thiruvananthapuram', 'Kollam'
                                                                , 'Pathanamthitta' , 'Alappuzha' , 'Kottayam' , 'Idukki'
                                                                , 'Ernakulam' , 'Thrissur' , 'Palakkad' , 'Malappuram'
                                                                , 'Kozhikode' , 'Wayanad' , 'Kannur' , 'Kasaragod' ]; %>
                                                                <option value="">Default</option>
                                                                <% districts.forEach(district=> { %>
                                                                    <option value="<%= district %>">
                                                                        <%= district %>
                                                                    </option>
                                                                    <% }); %>
                                                        </select>
                                                        <span id="districtError" class="error"
                                                            style="display: none; font-weight:bold; color: #129393;">Please
                                                            select a District</span><br>
                                                    </div>


                                                    <div class="col-md-6">
                                                        <label for="displayed_address">Address:</label>
                                                        <input type="text" id="displayed_address" name="address"
                                                            class="form-control text-field">
                                                        <span id="addressError" class="error"
                                                            style="display: none; font-weight:bold; color: #129393;">Please
                                                            enter Address</span><br>
                                                    </div>

                                                    <div class="col-md-6">
                                                        <label for="displayed_landmark">Landmark:</label>
                                                        <input type="text" id="displayed_landmark" name="landmark"
                                                            class="form-control text-field">
                                                    </div>

                                                    <div class="col-md-6">
                                                        <label for="displayed_pincode">Pincode:</label>
                                                        <input type="text" id="displayed_pincode" name="pincode"
                                                            class="form-control text-field">
                                                        <span id="pincodeError" class="error"
                                                            style="display: none; font-weight:bold; color: #129393;">Please
                                                            enter Pincode</span><br>
                                                    </div>

                                                    <div class="col-md-6">
                                                        <label for="displayed_home_or_office">Home/Office:</label>
                                                        <input type="text" id="displayed_home_or_office"
                                                            name="homeOrOffice" class="form-control text-field">
                                                        <span id="homeOrOfficeError" class="error"
                                                            style="display: none; font-weight:bold; color: #129393;">Please
                                                            select Home or Office</span><br>
                                                    </div>



                                                </div>
                                            </div>

                                        </form>
                                    </div>
                                </div>
                            </div>

                        </div>
                        
        <%- include('slider.ejs') %>
                    </div>


                    <div class="col-lg-5 zorder">
                        <div class="order-feild">
                            <p>YOUR ORDER</p>
                            <% if (typeof cart !=="undefined" && cart !==null ) { %>
                                <% if (cart && cart.products) { %>
                                    <% cart.products.forEach(product=> { %>
                                        <div class="order-products">
                                            <div class="zproduct d-flex">

                                                <div class="zproduct-img">
                                                    <img src="/<%= product.image %>" alt="<%= product.product.title %>">
                                                </div>
                                                <input type="hidden" name="products" value="<%= product.product.id %>">
                                                <div class="zproduct-data d-flex">
                                                    <div class="zimg-data">
                                                        <p style="">
                                                            <%= product.name %>
                                                        </p>
                                                    </div>
                                                    <div class="zproduct-info d-flex">
                                                        <div class="zmul d-flex">x
                                                            <p>
                                                                <%= product.quantity %>
                                                            </p>
                                                        </div>
                                                        <div class="zprice">
                                                            <p>
                                                                <%= product.price * product.quantity %>
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <% }); %>
                                            <% } %>
                                                <% } %>


                                                    <div class="sub-total ">
                                                        <div class=" d-flex justify-content-between align-items-center">
                                                            <div class="sub-left">
                                                                <p>Sub total </p>
                                                            </div>
                                                            <div class="sub-right">
                                                                <p><span>&#8377;</span>
                                                                    <%=totalAmount%>
                                                                </p>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex justify-content-between align-items-center">
                                                            <div class="sub-left">
                                                                <p>CGST Amount</p>
                                                            </div>
                                                            <div class="sub-right">
                                                                <p>
                                                                    <%=totalCGST%>
                                                                </p>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex justify-content-between align-items-center">
                                                            <div class="sub-left">
                                                                <p>SGST Amount</p>
                                                            </div>
                                                            <div class="sub-right">
                                                                <p>
                                                                    <%=totalSGST%>
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <div class="sub-left">
                                                            <p>Shipping charge</p>
                                                        </div>
                                                        <div class="sub-right">
                                                            <p>
                                                                <%=totaldeliveryCost%>
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="coupon_code">Coupon Code</label>
                                                        <input type="text" class="form-control" id="coupon_code" name="coupon_code" placeholder="Enter Coupon Code">
                                                    </div>
                                                    <button id="apply_coupon_btn" style="background-color: #129393;color: white;" class="btn">Apply Coupon</button>
                                                    
                                                    <!-- Display applied coupon code and Remove Coupon button -->
                                                    <div id="coupon_display" style="display: none;">
                                                        <p>Applied Coupon Code: <span id="applied_coupon_code"></span></p>
                                                        <button id="remove_coupon_btn" style="background-color: #ff0000; color: white; display: none;" class="btn">Remove Coupon</button>
                                                    </div>
                                                    <script>
                                                        document.getElementById('remove_coupon_btn').addEventListener('click', async () => {
                                                            try {
                                                                const response = await fetch('/removeCoupon', {
                                                                    method: 'POST',
                                                                    headers: {
                                                                        'Content-Type': 'application/json'
                                                                    },
                                                                    body: JSON.stringify({ couponCode: document.getElementById('applied_coupon_code').textContent })
                                                                });
                                                        
                                                                if (response.ok) {
                                                                    const data = await response.json();
                                                                    if (data.success) {
                                                                        // Coupon removed successfully
                                                                        // Additional actions if needed
                                                        
                                                                        // Reset coupon code input field
                                                                        document.getElementById('coupon_code').value = '';
                                                        
                                                                        // Hide applied coupon display
                                                                        document.getElementById('coupon_display').style.display = 'none';
                                                        
                                                                        // Hide Remove Coupon button
                                                                        document.getElementById('remove_coupon_btn').style.display = 'none';
                                                        
                                                                        // Update total amount on the checkout page if needed
                                                                    } else {
                                                                        console.error('Failed to remove coupon:', data.message);
                                                                    }
                                                                } else {
                                                                    console.error('Failed to remove coupon');
                                                                }
                                                            } catch (error) {
                                                                console.error('Error removing coupon:', error);
                                                            }
                                                        });
                                                        
                                                        </script>
                                                    <div class="ztotal d-flex justify-content-between">
                                                        <div class="total-left">
                                                            <p>Total</p>
                                                        </div>
                                                        <div class="total-right">
                                                            <p id="total_amount_display"><span>&#8377;</span>
                                                                <%= finalAmount %>
                                                            </p>
                                                        </div>

                                                    </div>
                                                    <div class="zpayment">
                                                        <h5>PAYMENT</h5>
                                                        <p>All transactions are secure and encrypted.</p>
                                                        <div class="payment-select">
                                                            <label>
                                                                <input type="radio" checked="checked" value="1"
                                                                    name="cash">
                                                                <span></span>
                                                                CASH ON DELIVERY
                                                            </label>


                                                            <label>
                                                                <input type="radio" value="2" name="cash"
                                                                    id="online_payment">
                                                                <span></span>
                                                                ONLINE PAYMENT
                                                            </label>

                                                            <label>
                                                                <input type="radio" value="3" name="cash"
                                                                    id="online_payment">
                                                                <span></span>
                                                                WALLET BALANCE : â‚¹ <%=walletBalance%>
                                                            </label>
                                                        </div>
                                                        <div class="privacy-policy-text">
                                                            <p>
                                                                Your personal data will be used to process your order,
                                                                support your experience<br>throughout this website, and
                                                                for other purposes described in our privacy policy.
                                                            </p>
                                                        </div>
                                                        <div class="form-check term-condition-checked">
                                                            <label class="form-check-label"
                                                                for="i-agree-to-the-website">
                                                                <input class="form-check-input" type="checkbox" value=""
                                                                    id="i-agree-to-the-website" checked>
                                                                I have read and agree to the website <a
                                                                    href="https://neritt.in/cart-terms">terms and
                                                                    conditions*</a>
                                                            </label>
                                                        </div>
                                                        <a href="" id="place_order" class="btn btn-primary  ">PLACE
                                                            ORDER</a>
                                                    </div>
                        </div>
                    </div>

                </div>
    
                <script>
                    document.getElementById('apply_coupon_btn').addEventListener('click', async () => {
                        const couponCode = document.getElementById('coupon_code').value;
                
                        try {
                            const response = await fetch('/applyCoupon', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({ couponCode })
                            });
                
                            if (response.ok) {
                                const data = await response.json();
                                if (data.success) {
                                    // Coupon applied successfully
                                    // Update total amount on the checkout page
                                    const totalAmountDisplay = document.getElementById('total_amount_display');
                                    totalAmountDisplay.innerHTML = `<span>&#8377;</span> ${data.updatedTotalAmount}`;
                
                                    // Update hidden input field value
                                    const totalPriceInput = document.getElementById('total_price');
                                    totalPriceInput.value = data.updatedTotalAmount;
                
                                    // Update hidden input field value
                                    const totalDiscountInput = document.getElementById('total_discounted');
                                    totalDiscountInput.value = data.discount;
                
                                    // Display applied coupon code
                                    document.getElementById('applied_coupon_code').textContent = couponCode;
                                    document.getElementById('coupon_display').style.display = 'block';
                
                                    // Show Remove Coupon button
                                    document.getElementById('remove_coupon_btn').style.display = 'block';
                                  // Display SweetAlert indicating coupon applied
                Swal.fire({
                    icon: 'success',
                    title: 'Coupon Applied',
                    text: 'Coupon applied successfully!',
                    showConfirmButton: false,
                    timer: 2000
                });
            } else {
                if (data.alreadyUsed) {
                                        // Display SweetAlert indicating that the user has already used the coupon
                                        Swal.fire({
                                            icon: 'info',
                                            title: 'Already used Not working',
                                            text: 'User has already used this coupon',
                                            showConfirmButton: false,
                                            timer: 2000
                                        });
                                    } else {
                                        console.error('Failed to apply coupon:', data.message);
                                    }
                                }
                            } else {
                                console.error('Failed to apply coupon');
                            }
                        } catch (error) {
                            console.error('Error applying coupon:', error);
                        }
                    });
                
                    document.getElementById('remove_coupon_btn').addEventListener('click', async () => {
                        // Reset coupon code input field
                        document.getElementById('coupon_code').value = '';
                
                        // Hide applied coupon display
                        document.getElementById('coupon_display').style.display = 'none';
                
                        // Hide Remove Coupon button
                        document.getElementById('remove_coupon_btn').style.display = 'none';
                
                        // Reset total amount and hidden input field value
                        const totalAmountDisplay = document.getElementById('total_amount_display');
                        totalAmountDisplay.innerHTML = `<span>&#8377;</span> ${originalTotalAmount}`; // Replace originalTotalAmount with the original total amount
                        const totalPriceInput = document.getElementById('total_price');
                        totalPriceInput.value = originalTotalAmount; // Replace originalTotalAmount with the original total amount
                
                        // Send request to remove the coupon from the user
                        try {
                            const response = await fetch('/removeCoupon', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({ couponCode: document.getElementById('remove_coupon_btn').textContent })
                            });
                
                            if (response.ok) {
                                const data = await response.json();
                                if (data.success) {
                                    // Coupon removed successfully
                                    // Additional actions if needed
                                } else {
                                    console.error('Failed to remove coupon:', data.message);
                                }
                            } else {
                                console.error('Failed to remove coupon');
                            }
                        } catch (error) {
                            console.error('Error removing coupon:', error);
                        }
                    });
                </script>
                
                
                
                

                <!-- JavaScript code to handle form submission -->
                <script>
                    // Function to handle online payment
                    // Function to handle online payment
                    // Function to handle online payment
function initiateRazorpayPayment(finalAmount) {
    // Create a Razorpay payment object
    var options = {
        key: 'rzp_test_ATZkateK1H3fCP', // Replace with your Razorpay API key
        amount: finalAmount, // Amount in paise (e.g., 1000 paise = â‚¹10)
        currency: 'INR',
        name: 'Neritt.shop',
        description: 'Purchase Description',
        handler: function (response) {
            // Handle payment success
            // Submit the form programmatically
            document.getElementById('checkout_details').submit();
        }
    };

    var rzp1 = new Razorpay(options);

    rzp1.open();

    rzp1.on('payment.failed', function (response) {
        // Extracting necessary data
        var errorDetails = {
            code: response.error.code,
            description: response.error.description,
            source: response.error.source,
            step: response.error.step,
            reason: response.error.reason,
            order_id: response.error.metadata.order_id,
            payment_id: response.error.metadata.payment_id
        };

        // Send data to backend
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "/store_checkout");
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
                // Request was successful
                console.log("Payment failure details sent successfully.");
            }
        };
        xhr.send(JSON.stringify(errorDetails));
    });
}


document.getElementById('place_order').addEventListener('click', function (event) {
    // Prevent default button behavior
    event.preventDefault();

    // Perform form validation
    var valid = true;

                        // Validate Father's Name
                        var fatherName = document.getElementById('displayed_father_name').value.trim();
                        if (!fatherName) {
                            document.getElementById('fatherNameError').style.display = 'block';
                            valid = false;
                        } else {
                            document.getElementById('fatherNameError').style.display = 'none';
                        }

                        // Validate Student's Name
                        var studentName = document.getElementById('displayed_student_name').value.trim();
                        if (!studentName) {
                            document.getElementById('studentNameError').style.display = 'block';
                            valid = false;
                        } else {
                            document.getElementById('studentNameError').style.display = 'none';
                        }

                        // Validate Email
                        var email = document.getElementById('displayed_email').value.trim();
                        var emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                        if (!emailPattern.test(email)) {
                            document.getElementById('emailError').style.display = 'block';
                            valid = false;
                        } else {
                            document.getElementById('emailError').style.display = 'none';
                        }

                        // Validate Phone
                        var phone = document.getElementById('displayed_phone').value.trim();
                        var phonePattern = /^\d{10}$/;
                        if (!phonePattern.test(phone)) {
                            document.getElementById('phoneError').style.display = 'block';
                            valid = false;
                        } else {
                            document.getElementById('phoneError').style.display = 'none';
                        }

                        // Validate District
                        var district = document.getElementById('displayed_district').value;
                        if (!district) {
                            document.getElementById('districtError').style.display = 'block';
                            valid = false;
                        } else {
                            document.getElementById('districtError').style.display = 'none';
                        }

                        // Validate Address
                        var address = document.getElementById('displayed_address').value.trim();
                        if (!address) {
                            document.getElementById('addressError').style.display = 'block';
                            valid = false;
                        } else {
                            document.getElementById('addressError').style.display = 'none';
                        }

                        // Validate Pincode
                        var pincode = document.getElementById('displayed_pincode').value.trim();
                        var pincodePattern = /^\d{6}$/;
                        if (!pincodePattern.test(pincode)) {
                            document.getElementById('pincodeError').style.display = 'block';
                            valid = false;
                        } else {
                            document.getElementById('pincodeError').style.display = 'none';
                        }

                        // Validate Home or Office
                        var homeOrOffice = document.getElementById('displayed_home_or_office').value;
                        if (!homeOrOffice) {
                            document.getElementById('homeOrOfficeError').style.display = 'block';
                            valid = false;
                        } else {
                            document.getElementById('homeOrOfficeError').style.display = 'none';
                        }

                        // If form is valid
                        if (valid) {
        // Check if online payment is selected
        var onlinePaymentSelected = document.getElementById('online_payment').checked;

        // If online payment is selected, initiate Razorpay payment
        if (onlinePaymentSelected) {
            // Calculate total amount based on product's final amount
            var finalAmount = (<%= finalAmount %>) * 100;
            // Initiate Razorpay payment
            initiateRazorpayPayment(finalAmount);
        } else {
            // If cash on delivery or other payment method is selected, proceed with normal order placement
            document.getElementById('checkout_details').submit();
        }
    }
});
                </script>

            </div>
            </div>
        </section>

        <div class="goto-top-button" id="back-to-top">
            <a href="#">
                <div class="goto-top"><span class="sr-only">goto top</span>
                    <div class="line-icon"></div>
                </div>
            </a>
        </div>
        <footer>
            <div class="container">
                <div class="top-footer">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="logo">
                                <a href="/">
                                    <img src="/public/images/logo-dark.png" alt="">
                                </a>
                            </div>
                            <div class="social-icons">
                                <h4>Stay touch with us</h4>
                                <ul>
                                    <li>
                                        <a href=" #" target="_blank" target="_blank">
                                            <svg id="Group_2956" data-name="Group 2956"
                                                xmlns="http://www.w3.org/2000/svg" width="8.873" height="16.639"
                                                viewBox="0 0 8.873 16.639">
                                                <path id="facebook-f-brands_1_" data-name="facebook-f-brands (1)"
                                                    d="M31.182,9.359l.46-3.011H28.765V4.394a1.5,1.5,0,0,1,1.69-1.627h1.308V.2A15.883,15.883,0,0,0,29.441,0c-2.369,0-3.918,1.442-3.918,4.053V6.348H22.89V9.359h2.634v7.279h3.241V9.359Z"
                                                    transform="translate(-22.89 0)" fill="#fff" />
                                            </svg>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#" target="_blank">
                                            <svg id="Group_2957" data-name="Group 2957"
                                                xmlns="http://www.w3.org/2000/svg" width="16.512" height="16.512"
                                                viewBox="0 0 16.512 16.512">
                                                <g id="instagram-line">
                                                    <path id="Path_700" data-name="Path 700" d="M0,0H16.512V16.512H0Z"
                                                        fill="none" />
                                                    <path id="Path_701" data-name="Path 701"
                                                        d="M8.88,6.816A2.064,2.064,0,1,0,10.944,8.88,2.064,2.064,0,0,0,8.88,6.816Zm0-1.376A3.44,3.44,0,1,1,5.44,8.88,3.44,3.44,0,0,1,8.88,5.44Zm4.472-.172a.86.86,0,1,1-.86-.86A.86.86,0,0,1,13.352,5.268ZM8.88,3.376c-1.7,0-1.98,0-2.772.04a3.738,3.738,0,0,0-1.237.228A2.147,2.147,0,0,0,3.644,4.871a3.732,3.732,0,0,0-.228,1.237c-.036.76-.04,1.025-.04,2.772,0,1.7,0,1.98.04,2.772a3.753,3.753,0,0,0,.228,1.236A2.139,2.139,0,0,0,4.87,14.115a3.745,3.745,0,0,0,1.238.229c.76.036,1.025.04,2.772.04,1.7,0,1.98,0,2.772-.04a3.76,3.76,0,0,0,1.236-.228,2.01,2.01,0,0,0,.743-.483,1.989,1.989,0,0,0,.484-.743,3.761,3.761,0,0,0,.228-1.238c.036-.76.04-1.025.04-2.772,0-1.7,0-1.98-.04-2.772a3.745,3.745,0,0,0-.228-1.237,2,2,0,0,0-.484-.743,1.984,1.984,0,0,0-.743-.484,3.736,3.736,0,0,0-1.237-.228C10.892,3.38,10.627,3.376,8.88,3.376ZM8.88,2c1.869,0,2.1.007,2.836.041a5.068,5.068,0,0,1,1.67.32,3.354,3.354,0,0,1,1.219.793A3.377,3.377,0,0,1,15.4,4.374a5.082,5.082,0,0,1,.32,1.67c.032.733.041.967.041,2.836s-.007,2.1-.041,2.836a5.086,5.086,0,0,1-.32,1.67A3.513,3.513,0,0,1,13.386,15.4a5.082,5.082,0,0,1-1.67.32c-.733.032-.967.041-2.836.041s-2.1-.007-2.836-.041a5.086,5.086,0,0,1-1.67-.32,3.513,3.513,0,0,1-2.012-2.012,5.065,5.065,0,0,1-.32-1.67C2.009,10.982,2,10.749,2,8.88s.007-2.1.041-2.836a5.065,5.065,0,0,1,.32-1.67A3.513,3.513,0,0,1,4.374,2.361a5.065,5.065,0,0,1,1.67-.32C6.777,2.009,7.011,2,8.88,2Z"
                                                        transform="translate(-0.624 -0.624)" fill="#fff" />
                                                </g>
                                            </svg>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#" target="_blank">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16.52" height="11.437"
                                                viewBox="0 0 16.52 11.437">
                                                <path id="Path_11489" data-name="Path 11489"
                                                    d="M31.224,27.5H20.3a2.8,2.8,0,0,0-2.8,2.8v5.846a2.8,2.8,0,0,0,2.8,2.8H31.224a2.8,2.8,0,0,0,2.8-2.8V30.3A2.8,2.8,0,0,0,31.224,27.5Zm-4.765,6.989L23.981,35.76V30.677l2.478,1.271,2.478,1.271Z"
                                                    transform="translate(-17.5 -27.5)" fill="#fff" />
                                            </svg>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <h3>Quick Links</h3>
                            <ul>
                                <li><a href="/getCategory">Shop by Category</a></li>
                                <li><a href="/about">About Us</a></li>

                                <li><a href="/contact">Contact Us</a></li>
                                <li><a href="/privacy-policy">Privacy Policy</a></li>
                                <li><a href="/terms">Terms & Conditions</a></li>
                                <li><a href="/cancellation-policy">Cancellation & Refund Policy</a></li>
                                <li><a href="/shipping-policy">Shipping & Delivery Policy</a></li>




                            </ul>
                        </div>
                        <div class="col-md-3">
                            <h3>My account</h3>
                            <ul>

                                <li><a href="/my-orders">My Account</a></li>
                                <li><a href="/cart">Cart</a></li>
                                <li><a href="/my-orders">My Orders</a></li>
                                <li><a href="/school-registration">School Registration </a></li>
                                <li><a href="/supplier-registration">Supplier Registration</a></li>

                            </ul>
                        </div>

                        <div class="col-md-3">
                            <h3>Help & Support</h3>
                            <div class="support-block">
                                <p class="small">Chat On Whatsapp</p>
                                <div class="whatsapp">
                                    <h4>
                                        <span>
                                            <svg id="_1269930_call_social_social_media_whatsapp_icon"
                                                data-name="1269930_call_social_social media_whatsapp_icon"
                                                xmlns="http://www.w3.org/2000/svg" width="22.532" height="22.532"
                                                viewBox="0 0 22.532 22.532">
                                                <g id="Group_2955" data-name="Group 2955">
                                                    <path id="WhatsApp"
                                                        d="M22.532,10.965A11.016,11.016,0,0,1,11.466,21.931a11.144,11.144,0,0,1-5.358-1.377L0,22.532l2-5.883A10.979,10.979,0,0,1,11.466,0,11.016,11.016,0,0,1,22.532,10.965ZM11.466,1.752a9.253,9.253,0,0,0-9.288,9.213,9.033,9.033,0,0,0,1.778,5.408L2.8,19.8l3.58-1.127A9.246,9.246,0,1,0,11.466,1.752Zm5.583,11.742a1.926,1.926,0,0,0-.526-.325c-.275-.125-1.6-.776-1.853-.876s-.426-.125-.6.125c-.175.275-.7.876-.851,1.051a.418.418,0,0,1-.576.075,7.279,7.279,0,0,1-2.178-1.327,8.108,8.108,0,0,1-1.5-1.853.385.385,0,0,1,.125-.551c.125-.125.275-.325.4-.476a2.707,2.707,0,0,0,.275-.451.462.462,0,0,0-.025-.476c-.075-.125-.6-1.452-.826-2-.225-.526-.451-.451-.6-.451s-.35-.025-.526-.025a1.078,1.078,0,0,0-.726.325,3.032,3.032,0,0,0-.951,2.253,5.26,5.26,0,0,0,1.1,2.779,11.052,11.052,0,0,0,4.632,4.056c2.754,1.077,2.754.726,3.255.676a2.746,2.746,0,0,0,1.828-1.277A2.17,2.17,0,0,0,17.049,13.494Z"
                                                        fill="#fff" />
                                                </g>
                                            </svg>
                                        </span> <a
                                            href="https://api.whatsapp.com/send?phone=+919539800035&text=Hello%20Neritt%2C%0ANeed%20your%20help"
                                            target="_blank">(+91) 7994 8702 62</a>
                                    </h4>
                                    <p class="c-g">FOR COMPLAINTS</p>
                                    <a class="email-sec">infoc@ neritt.in</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div><a class="whats-app"
                        href="https://api.whatsapp.com/send?phone=+919539800035&text=Hello%20Neritt%2C%0ANeed%20your%20help"
                        target="_blank">
                        <i class="fa fa-whatsapp my-float"></i>
                    </a></div>

            </div>
        </footer>
        <!-- <script>
        $(function() {
            $(".slider-full-img .slider-img img").blowup();
        });
    </script> -->



        <script>
            // Function to update the displayed fields
            function updateDisplayedFields() {
                const selectElement = document.getElementById('existing_address');
                const displayedFatherNameInput = document.getElementById('displayed_father_name');
                const displayedStudentNameInput = document.getElementById('displayed_student_name');
                const displayedEmailInput = document.getElementById('displayed_email');
                const displayedPhoneInput = document.getElementById('displayed_phone');
                const displayedDistrictSelect = document.getElementById('displayed_district');
                const displayedAddressInput = document.getElementById('displayed_address');
                const displayedLandmarkInput = document.getElementById('displayed_landmark');
                const displayedPincodeInput = document.getElementById('displayed_pincode');
                const displayedHomeOrOfficeInput = document.getElementById('displayed_home_or_office');

                const selectedOption = selectElement.options[selectElement.selectedIndex];
                if (selectedOption.value) {
                    // Parse the selected address text to extract individual fields
                    const selectedAddressText = selectedOption.text;
                    const addressFields = selectedAddressText.split(', ');

                    // Update the input fields with the extracted fields
                    displayedFatherNameInput.value = addressFields[0];
                    displayedStudentNameInput.value = addressFields[1];
                    displayedEmailInput.value = addressFields[2];
                    displayedPhoneInput.value = addressFields[3];
                    displayedDistrictSelect.value = addressFields[4]; // Set the selected district in the dropdown menu
                    displayedAddressInput.value = addressFields[5];
                    displayedLandmarkInput.value = addressFields[6];
                    displayedPincodeInput.value = addressFields[7];
                    displayedHomeOrOfficeInput.value = addressFields[8];
                } else {
                    // Clear the input fields if no option is selected
                    displayedFatherNameInput.value = '';
                    displayedStudentNameInput.value = '';
                    displayedEmailInput.value = '';
                    displayedPhoneInput.value = '';
                    displayedDistrictSelect.value = '';
                    displayedAddressInput.value = '';
                    displayedLandmarkInput.value = '';
                    displayedPincodeInput.value = '';
                    displayedHomeOrOfficeInput.value = '';
                }
            }

            // Add event listener to the select element
            document.getElementById('existing_address').addEventListener('change', updateDisplayedFields);
        </script>

        <script>
            $(document).ready(function () {
                $(".set > a").on("click", function () {
                    if ($(this).hasClass("active")) {
                        $(this).removeClass("active");
                        $(this)
                            .siblings(".content")
                            .slideUp(200);
                        $(".set > a i")
                            .removeClass("AccordionsArrowUp")
                            .addClass("AccordionsArrowDown");
                    } else {
                        $(".set > a i")
                            .removeClass("AccordionsArrowUp")
                            .addClass("AccordionsArrowDown");
                        $(this)
                            .find("i")
                            .removeClass("AccordionsArrowDown")
                            .addClass("AccordionsArrowUp");
                        $(".set > a").removeClass("active");
                        $(this).addClass("active");
                        $(".content").slideUp(200);
                        $(this)
                            .siblings(".content")
                            .slideDown(200);
                    }
                });

                var enrollType;
                //  $("#div_id_As").hide();
                $("input[name='As']").change(function () {
                    memberType = $("input[name='select']:checked").val();
                    providerType = $("input[name='As']:checked").val();
                    toggleIndividInfo();
                });

                $("input[name='select']").change(function () {
                    memberType = $("input[name='select']:checked").val();
                    toggleIndividInfo();
                    toggleLearnerTrainer();
                });

                function toggleLearnerTrainer() {

                    if (memberType == 'P' || enrollType == 'company') {
                        $("#cityField").hide();
                        $("#providerType").show();
                        $(".provider").show();
                        $(".locationField").show();
                        if (enrollType == 'INSTITUTE') {
                            $(".individ").hide();
                        }

                    } else {
                        $("#providerType").hide();
                        $(".provider").hide();
                        $('#name').show();
                        $("#cityField").hide();
                        $(".locationField").show();
                        $("#instituteName").hide();
                        $("#cityField").show();

                    }
                }

                function toggleIndividInfo() {

                    if (((typeof memberType !== 'undefined' && memberType == 'TRAINER') || enrollType == 'INSTITUTE') &&
                        providerType == 'INDIVIDUAL') {
                        $("#instituteName").hide();
                        $(".individ").show();
                        $('#name').show();
                    } else if ((typeof memberType !== 'undefined' && memberType == 'TRAINER') || enrollType ==
                        'INSTITUTE') {
                        $('#name').hide();
                        $("#instituteName").show();
                        $(".individ").hide();
                    }
                }
            });
        </script>
        <script>
            const items = document.querySelectorAll(".AboutAccordion button");

            function toggleAccordion() {
                const itemToggle = this.getAttribute('aria-expanded');

                for (i = 0; i < items.length; i++) {
                    items[i].setAttribute('aria-expanded', 'false');
                }

                if (itemToggle == 'false') {
                    this.setAttribute('aria-expanded', 'true');
                }
            }

            items.forEach(item => item.addEventListener('click', toggleAccordion));
        </script>

        <script>
            function orderNumber() {
                let now = Date.now().toString() // '1492341545873'
                // pad with extra random digit
                now += now + Math.floor(Math.random() * 10)
                // format
                return 'ORD-' + [now.slice(0, 4), now.slice(4, 10), now.slice(10, 14)].join('-')
            }

            const ordId = orderNumber()
            console.log(ordId);
        </script>
         <script>
            // Function to parse query parameters from URL
            function getQueryParam(name) {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(name);
            }
    
            // Check if exceedsLimit query parameter is true
            const exceedsLimit = getQueryParam('exceedsLimit');
            const lessThanLimit = getQueryParam('lessThanLimit');
            
            // Display SweetAlert if exceedsLimit is true
            if (exceedsLimit === 'true') {
                Swal.fire({
                    icon: 'info',
                    title: 'COD Not Available',
                    text: 'Order above Rs 1000 should not be allowed for COD.',
                    showConfirmButton: false,
                    timer: 2000
                });
            }
    
            // Display SweetAlert if lessThanLimit is true
            if (lessThanLimit === 'true') {
                Swal.fire({
                    icon: 'error',
                    title: 'COD Not Available',
                    text: 'COD is not available for orders less than Rs 1000.',
                    showConfirmButton: false,
                    timer: 2000
                });
            }
        </script>


        <script>
            async function populateAddresses() {
                try {
                    const response = await fetch('/addresses');
                    const addresses = await response.json();

                    const selectElement = document.getElementById('existing_address');
                    selectElement.innerHTML = '<option value="">Select an address</option>';

                    addresses.forEach(address => {
                        const option = document.createElement('option');
                        option.value = address._id;
                        option.textContent = `${address.address}, ${address.district}, ${address.pincode}`;
                        selectElement.appendChild(option);
                    });
                } catch (error) {
                    console.error('Error fetching addresses:', error);
                }
            }

            // Call the function to populate addresses when the page loads
            window.onload = populateAddresses;

            // Function to display selected address
            function displaySelectedAddress() {
                const selectElement = document.getElementById('existing_address');
                const selectedAddress = selectElement.options[selectElement.selectedIndex].textContent;

                // Display the selected address however you want (e.g., in a separate <div>)
                const displayElement = document.getElementById('selected_address_display');
                displayElement.textContent = `Selected Address: ${selectedAddress}`;
            }
        </script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script>
            // Function to parse query parameters from URL
            function getQueryParam(name) {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(name);
            }

            // Check if outOfStock query parameter is true
            const outOfStock = getQueryParam('outOfStock');
            if (outOfStock === 'true') {
                // Display SweetAlert indicating that the product is successfully added to the cart
                Swal.fire({
                    icon: 'info',
                    title: 'Insufficient Wallet',
                    text: 'Insufficient balance in wallet.',
                    showConfirmButton: false,
                    timer: 2000
                });
            }
        </script>
        <!-- <script>
            // Function to parse query parameters from URL
            function getQueryParam(name) {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(name);
            }

            // Check if outOfStock query parameter is true
            const couponApplied = getQueryParam('couponApplied');
            if (couponApplied === 'true') {
                // Display SweetAlert indicating that the product is successfully added to the cart
                Swal.fire({
                    icon: 'info',
                    title: 'Already used1',
                    text: 'User has already used this coupon',
                    showConfirmButton: false,
                    timer: 2000
                });
            }
        </script> -->

        <script>
            // Function to parse query parameters from URL
            function getQueryParam(name) {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(name);
            }

            // Check if outOfStock query parameter is true
            const invalid = getQueryParam('invalidCoupon');
            if (invalidCoupon === 'true') {
                // Display SweetAlert indicating that the product is successfully added to the cart
                Swal.fire({
                    icon: 'info',
                    title: 'Invalid Coupon',
                    text: 'Entered Wrong Coupon ID. Please Recheck Your Coupon',
                    showConfirmButton: false,
                    timer: 2000
                });
            }
        </script>


</body>

</html>